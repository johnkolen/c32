\documentclass{article}
\usepackage{amsmath}
\usepackage{multicol}
\title{A Space-Limited Algorithm for Computing Collatz Sequences}
\author{John F. Kolen\\
  New Mexico Institute of Mininig and Technolgy \\
  Socorro, NM
  }

\date{\today}
\begin{document}

\maketitle


\begin{abstract}
  This paper describes a space-bounded algorithm for computing Collatz
  sequences.  It relies on performing calculation using a double-base numbers
  system \cite{dimitrov2017}, specifically ${2,3}$-integers. This
  representational scheme simplifies the Collatz operations on $x$ of $3x+1$
  and $x/2$ to left-shift plus 1 and down-shift. These operations do not
  destroy terms and will consume unbounded space if left unchecked. It is
  possible to create boundaries and fold terms back onto a constained playing
  field. For any positive integer, $x$, it is possible to perform Collatz
  iterations within an area $log_2x+2$ by $log_2x$ bits using at most an
  additional $2log_2n$ bits of additional storage to hold the escaping bits
  before processing. Therefore, any Collatz sequence starting from a positive
  integer will eventually cycle.
\end{abstract}

\section{Introduction}

The Collatz conjecture is known by many names: the Ulam problem, the Syracuse
problem, and the $3n+1$ conjecture.  It is an unsolved problem in mathematics
that has been around for over eighty years regarding sequences of number that
follow a simple set of rules.
\begin{equation}
  C(x) = \begin{cases}
    3 x + 1 & \text{if } x \text{ is odd}\\
    x / 2 & \text{otherwise}
    \end{cases}
\end{equation}
In this paper, a similar version will be used that recognizes that every $3x+1$
operation is always followed by a division since the value is even ($3(2x+1) + 1=6x + 4$).

\begin{equation}
  C(x) = \begin{cases}
    (3 x + 1) / 2 & \text{if } x \text{ is odd}\\
    x / 2 & \text{otherwise}
    \end{cases}
\end{equation}

It has been observed that for positive integer, iterating either of of the functions
eventually produces cyclic behavior ($4\rightarrow 2\rightarrow 1\rightarrow 4$ and
$2\rightarrow1\rightarrow2$, respectively.

This paper describes a space-bounded algorithm for computing the Collatz
sequences.  By utilizing a double-base number system to carry out calculations,
it is possible to construct boundaries that limit the number of bits used to
represent sequence elements.  The constraints are determined \emph{a priori}
from the length of the binary representation of the starting number. The technique
involves returning any escaping bits back into the fixed region.

\paragraph{Number Representation}

A double-base number system using combations of powers of two relatively prime numbers.
Here is formulation of {2,3}-integers
\begin{equation}
  \sum_{i=0}^n \sum_{j=0}^n x_{ij} 2^i3^j
\end{equation}

where $x_{ij}$ are either zero or one. This number system is not unique, as it is possible
to represent integers in multiple forms (e.g. $4$ is also $1 + 3$). A
cartesian-layout will be used for visualizations

\begin{table}
  \begin{center}
  \begin{tabular}{lccccc}
  4 & $2^43^0$ & $2^43^1$& $2^43^2$& $2^43^3$& $2^43^4$ \\
  3 & $2^33^0$ & $2^33^1$& $2^33^2$& $2^33^3$& $2^33^4$ \\
  2 & $2^23^0$ & $2^23^1$& $2^23^2$& $2^23^3$& $2^23^4$ \\
  1 & $2^13^0$ & $2^13^1$& $2^13^2$& $2^13^3$& $2^13^4$ \\
  0 & $2^03^0$ & $2^03^1$& $2^03^2$& $2^03^3$& $2^03^4$ \\
  $i/j$ & 0 & 1 & 2 & 3 & 4
  \end{tabular}
  \end{center}
  \caption{
    Bit coefficients for the planar representation of ${3,2}$-integers.}
\end{table}

\begin{figure}
  \begin{multicols}{3}
\begin{verbatim}
1
1
1
1
1
1
1
\end{verbatim}
Base 2
\columnbreak
\begin{verbatim}
1
0
0
0
001
0
0001
\end{verbatim}
Minimal number of bits
\columnbreak
\begin{verbatim}





001
10011
\end{verbatim}
Base 3
  \end{multicols}

  \caption{Several ways to represent 127 as ${3,2}$-integers.}
\end{figure}
Under this system, multiplication and division by either base is a shift. Thus, $3x$ is a
right-shift ($x\rightarrow$) and $x/2$ is a down-shift ($x\downarrow$). In the binary system,
division is still a shift, but multiplication by three requires a shift and add. Now, the
Collatz transformation becomes
\begin{equation}
  C(x) = \begin{cases}
    (x\rightarrow + 1)\downarrow & \text{if } x \text{ is odd}\\
    x\downarrow & \text{otherwise}
    \end{cases}
\end{equation}
Determining parity of {23}-intgers is a bit more involved. The only terms that impact
parity are those of the form $x_{0j}3^j$. It is necessary to count these terms modulo two
in order to compute parity.

It should be clear that under this representation, the Collatz function never
destroys a bit once it has been added to the value. By extending the notation
to cover fractional values (where $i<0$), bit patterns propagate unchanged down
and to the right across the representational plane.  At any given time, the
number of bits is the number of starting bits and the number of multiplies that
have happend so far. In fact, the final $2$-$1$ oscillation of the system is
one of value and not representation.

\begin{figure}
  \begin{multicols}{5}
\emph{2}
\begin{verbatim}
1
0
----
\end{verbatim}
\columnbreak
\emph{1}
\begin{verbatim}
0
1
----
\end{verbatim}
\columnbreak
\emph{2}
\begin{verbatim}
0
0
----
11
\end{verbatim}
\columnbreak
\emph{1}
\begin{verbatim}
0
0
----
0
11
\end{verbatim}
\columnbreak
\emph{2}
\begin{verbatim}
0
0
----
1
0
011
\end{verbatim}
\columnbreak
  \end{multicols}
  \caption{A $2-1$ oscillation. The dashes separate the integer part above
    from the ``fractional'' part below. Sometimes integers can be represented
  as sums of fractional terms. The middle $2$ is represented by $1/2 + 3/2$.}
\end{figure}

\section{Boundaries}



\bibliographystyle{plain}
\bibliography{collatz}

\end{document}
